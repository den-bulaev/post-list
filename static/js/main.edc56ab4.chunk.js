(this["webpackJsonppost-list"]=this["webpackJsonppost-list"]||[]).push([[0],{12:function(t,e,n){},16:function(t,e,n){},18:function(t,e,n){},19:function(t,e,n){},20:function(t,e,n){"use strict";n.r(e);var s=n(1),c=n.n(s),o=n(7),r=n.n(o),a=(n(12),n(2)),i=n(3),u=n.n(i),d=n(4),l=n(5),j=function(t,e){return fetch("https://bloggy-api.herokuapp.com/"+t,e).then((function(t){if(!t.ok)throw new Error("".concat(t.status," - ").concat(t.statusText));return t.json()}))},b=function(t){return j(t,{method:"GET"})},p=function(){return b("posts")},m=function(t){var e;e="posts/".concat(t),j(e,{method:"DELETE"})},h=function(t){return function(t,e){return j(t,e)}("posts",t)},f=(n(16),n(0)),O=function(t){var e=t.setSelectedPostId,n=t.selectedPostId,s=t.posts,c=t.setPosts,o=function(t){var n=t.target.dataset.postId;e(+n)},r=function(){e(0)},a=function(){var t=Object(d.a)(u.a.mark((function t(e){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,m(e.target.dataset.postId);case 2:p().then((function(t){return c(t)}));case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(f.jsx)("ul",{className:"PostList",children:s.map((function(t){var e=t.id,s=t.title;return Object(f.jsxs)("li",{className:"PostList__item",children:[Object(f.jsx)("h2",{children:s}),Object(f.jsxs)("div",{className:"PostList__buttons-container",children:[Object(f.jsx)("button",{"data-post-id":e,className:"PostList__button",type:"button",onClick:e===n?Object(l.debounce)(r,300):Object(l.debounce)(o,300),children:e===n?"close":"open"}),Object(f.jsx)("button",{"data-post-id":e,className:"PostList__button PostList__delete",type:"button",onClick:Object(l.debounce)(a,300),children:"delete"})]})]},e)}))})};O.defaultProps={posts:[]};var x=c.a.memo(O),_=function(t){var e=t.comments;return e.length>0?Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)("h3",{children:"Comments:"}),Object(f.jsx)("ul",{className:"comments",children:e.map((function(t){var e=t.id,n=t.body;return Object(f.jsx)("li",{children:Object(f.jsx)("p",{children:n})},e)}))})]}):Object(f.jsx)("h3",{children:"There are no comments yet"})};_.defaultProps={comments:[]};var v=c.a.memo(_),y=function(t){var e=t.postId,n=Object(s.useState)(null),c=Object(a.a)(n,2),o=c[0],r=c[1];return Object(s.useEffect)((function(){var t;(t=e,b("posts/".concat(t,"?_embed=comments"))).then((function(t){return r(t)}))}),[]),o&&Object(f.jsxs)("div",{className:"post",children:[Object(f.jsx)("h2",{className:"post__title",children:o.title}),Object(f.jsx)("p",{className:"post__body",children:o.body}),Object(f.jsx)(v,{comments:o.comments})]})},N=c.a.memo(y),P=(n(18),function(t){var e=t.setPosts,n=Object(s.useState)(""),c=Object(a.a)(n,2),o=c[0],r=c[1],i=Object(s.useState)(""),l=Object(a.a)(i,2),j=l[0],b=l[1],m=function(){var t=Object(d.a)(u.a.mark((function t(n){var s;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),s={method:"POST",body:JSON.stringify({title:o,body:j}),headers:{"Content-type":"application/json; charset=UTF-8"}},t.next=4,h(s);case 4:p().then((function(t){return e(t)})),b(""),r("");case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),O=function(t){var e=t.target.name,n=t.target.value;switch(e){case"title":r(n);break;case"body":b(n);break;default:throw new Error("Unexpected field name")}};return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)("h2",{className:"form-title",children:"Add new post"}),Object(f.jsxs)("form",{onSubmit:m,className:"NewPost",children:[Object(f.jsx)("input",{name:"title",type:"text",value:o,onChange:O,placeholder:"Enter post title",required:!0}),Object(f.jsx)("input",{name:"body",type:"text",value:j,onChange:O,placeholder:"Enter post body",required:!0}),Object(f.jsx)("button",{type:"submit",className:"NewPost__submit-button",children:"Add"})]})]})}),g=c.a.memo(P);n(19);var w=function(){var t=Object(s.useState)(0),e=Object(a.a)(t,2),n=e[0],c=e[1],o=Object(s.useState)([]),r=Object(a.a)(o,2),i=r[0],u=r[1];return Object(s.useEffect)((function(){p().then((function(t){return u(t)}))}),[]),Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)("header",{className:"App__header",children:Object(f.jsx)("h1",{className:"App__title",children:"Posts List"})}),Object(f.jsxs)("main",{className:"App__main",children:[Object(f.jsx)("section",{className:"App__sidebar",children:Object(f.jsx)(x,{selectedPostId:n,setSelectedPostId:c,setPosts:u,posts:i})}),Object(f.jsxs)("section",{className:"App__details",children:[!!n&&Object(f.jsx)(N,{postId:n}),Object(f.jsx)(g,{setPosts:u})]})]})]})};r.a.render(Object(f.jsx)(w,{}),document.getElementById("root"))}},[[20,1,2]]]);
//# sourceMappingURL=main.edc56ab4.chunk.js.map